<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="node_modules/element-ui/lib/theme-chalk/index.css"
    />

    <link rel="stylesheet" href="node_modules/splitpanes/dist/splitpanes.css" />

    <link
      rel="stylesheet"
      href="node_modules/ag-grid-community/dist/styles/ag-grid.css"
    />
    <link
      rel="stylesheet"
      href="node_modules/ag-grid-community/dist/styles/ag-theme-balham.css"
    />

    <style>
      #container {
        display: flex;
        flex-direction: column;
        height: 95vh;
      }
      .monaco-editor {
        position: absolute;
      }
      #editor {
        width: 100%;
      }
      #connect {
        flex: initial;
        margin-bottom: 10px;
      }
      #main-area {
        flex: auto;
        /* min-height: 90vh;
        max-height: 90vh; */
        height: 50%;
        border: 1px solid lightgray;
      }
      body {
        font-family: "Helvetica Neue", Helvetica;
      }
      #results {
        background-color: rgb(240, 240, 240);
        overflow: auto;
        /* flex: auto; */
      }
    </style>
  </head>
  <body>
    <div id="v-app">
      <el-dialog
        v-bind:title="dialogTitle"
        :visible.sync="dialog.visible"
        width="50%"
      >
        <server-edit
          @confirm="confirm"
          @cancel="cancel"
          :server="dialog.server"
        ></server-edit>
      </el-dialog>

      <div id="container">
        <div id="connect">
          <el-select
            size="mini"
            v-model="selectServer"
            placeholder="Select a server"
            no-data-text="Use Add to set up a server"
          >
            <el-option
              v-for="srv in servers.values()"
              :key="srv.id"
              :label="srv.name"
              :value="srv.id"
            >
            </el-option>
          </el-select>

          <el-button type="primary" size="mini" v-on:click="send">Go</el-button>

          <el-button-group>
            <el-button
              type="primary"
              size="mini"
              @click="editServer"
              :disabled="!selectServer"
              >Edit</el-button
            >
            <el-button type="primary" size="mini" @click="addServer"
              >Add</el-button
            >
            <el-popconfirm
              title="Are you sure you want to delete this server?"
              confirm-button-text="OK"
              cancel-button-text="Cancel"
              @confirm="deleteServer"
            >
              <el-button
                slot="reference"
                type="danger"
                size="mini"
                :disabled="!selectServer"
                >Delete</el-button
              >
            </el-popconfirm>
          </el-button-group>
          <el-button-group>
            <el-button type="primary" size="mini" @click="saveAs"
              >Save As</el-button
            >
            <el-button type="primary" size="mini" @click="load">Load</el-button>
          </el-button-group>
        </div>

        <div id="main-area" ref="mainArea">
          <splitpanes
            class="default-theme"
            @resize="handlePaneResize($event)"
            horizontal
          >
            <pane
              id="editor"
              :size="100 - resultsPaneSize"
              min-size="10"
              max-size="90"
            ></pane>
            <pane
              id="results"
              :size="resultsPaneSize"
              min-size="10"
              max-size="90"
            >
              <query-results
                v-bind:result="queryResult"
                :pane-height="resultsPaneHeight"
              ></query-results>
            </pane>
          </splitpanes>
        </div>
      </div>
    </div>
  </body>

  <script src="node_modules/vue/dist/vue.js"></script>
  <script src="node_modules/element-ui/lib/index.js"></script>
  <script src="node_modules/ag-grid-community/dist/ag-grid-community.noStyle.js"></script>
  <script src="bootstrap.js"></script>
</html>
