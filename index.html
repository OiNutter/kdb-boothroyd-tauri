<!DOCTYPE html>
<html>
  <head>
    <title>KDB Studio2 Prototype</title>
    <link
      rel="stylesheet"
      href="node_modules/element-ui/lib/theme-chalk/index.css"
    />
    <script src="node_modules/vue/dist/vue.js"></script>
    <script src="node_modules/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="node_modules/splitpanes/dist/splitpanes.css" />

    <style>
      /* define some CSS styling on page elements */
      #container {
        display: flex;
        flex-direction: column;
        height: 95vh;
        /* border: 1px solid orange; */
      }
      .monaco-editor {
        position: absolute;
      }
      #editor {
        width: 100%;
        border: 1px solid gray;
        /* flex: 1 1 auto; */
      }
      #connect {
        /* flex: initial; */
        flex: initial;
        margin-bottom: 10px;
      }
      body {
        font-family: "Helvetica Neue", Helvetica;
      }
      #results {
        /* font-family: "Courier New"; */
        font-size: smaller;
        background-color: white;
        border: 1px solid gray;
        overflow: auto;
        flex: auto;
        /* flex-grow: 1; */
      }
      table,
      th,
      td {
        border: 1px solid lightgray;
        border-collapse: collapse;
        padding-left: 10px;
        padding-right: 10px;
        font-family: "Lucida Sans";
        text-align: left;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div id="v-app">
      <el-dialog
        v-bind:title="dialogTitle"
        :visible.sync="dialog.visible"
        width="50%"
      >
        <server-edit
          @confirm="confirm"
          @cancel="cancel"
          :server="dialog.server"
        ></server-edit>
      </el-dialog>

      <div id="container">
        <div id="connect">
          <el-select
            size="mini"
            v-model="selectServer"
            placeholder="Select a server"
            no-data-text="Use Add to set up a server"
          >
            <el-option
              v-for="srv in servers.values()"
              :key="srv.id"
              :label="srv.name"
              :value="srv.id"
            >
            </el-option>
          </el-select>

          <el-button type="primary" size="mini" v-on:click="send">Go</el-button>

          <el-button-group>
            <el-button
              type="primary"
              size="mini"
              @click="editServer"
              :disabled="!selectServer"
              >Edit</el-button
            >
            <el-button type="primary" size="mini" @click="addServer"
              >Add</el-button
            >
            <el-popconfirm
              title="Are you sure you want to delete this server?"
              confirm-button-text="OK"
              cancel-button-text="Cancel"
              @confirm="deleteServer"
            >
              <el-button
                slot="reference"
                type="danger"
                size="mini"
                :disabled="!selectServer"
                >Delete</el-button
              >
            </el-popconfirm>
          </el-button-group>
        </div>
        <splitpanes class="default-theme" horizontal style="flex-grow: 1">
          <!-- <div id="editor"></div> -->
          <pane id="editor" size="50" min-size="10" max-size="90"></pane>
          <!-- <div id="txtOutput" v-html="JSON.stringify(queryResult)"></div> -->
          <!-- <pane
            id="results"
            min-size="10"
            max-size="90"
            size="50"
            v-html="JSON.stringify(queryResult)" 
          > -->
          <pane id="results" min-size="10" max-size="90" size="50">
            <query-results v-bind:result="queryResult"></query-results>
          </pane>
        </splitpanes>
      </div>
    </div>
  </body>

  <script src="bootstrap.js"></script>
</html>
